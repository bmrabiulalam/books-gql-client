(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{43:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var r,c,a,i,o=t(3),j=t.n(o),s=t(31),d=t.n(s),b=(t(43),t(20)),l=t(60),u=t(21),h=t(58),O=Object(h.a)(r||(r=Object(u.a)(["\n  query GetAuthors {\n    authors {\n      name\n      id\n    }\n  }\n"]))),x=Object(h.a)(c||(c=Object(u.a)(["\nquery GetBooks {\n  books {\n    id\n    name\n    genre\n  }\n}\n"]))),m=Object(h.a)(a||(a=Object(u.a)(["\n    mutation (\n        $name: String!,\n        $genre: String!,\n        $authorId: ID!\n      ) {\n        addBook(name: $name, genre: $genre, authorId: $authorId){\n            name\n            id\n        }\n    }\n"]))),g=Object(h.a)(i||(i=Object(u.a)(["\n    query($id: ID!){\n        book(id: $id){\n            id\n            name\n            genre\n            author {\n                id\n                name\n                books {\n                    id\n                    name\n                }\n            }\n        }\n    }\n"]))),p=t(2);var v=function(e){var n=e.bookId,t=Object(l.a)(g,{variables:{id:n}}),r=t.loading,c=t.error,a=t.data;if(r)return Object(p.jsx)("p",{children:"Loading..."});if(c)return"Error! ".concat(c.message);var i=a.book;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:i.name}),Object(p.jsx)("p",{children:i.genre}),Object(p.jsx)("p",{children:i.author.name}),Object(p.jsx)("p",{children:"All books by this author:"}),Object(p.jsx)("ul",{className:"other-books",children:i.author.books.map((function(e){return Object(p.jsx)("li",{children:e.name},e.id)}))})]})};var f=function(){var e=Object(o.useState)(null),n=Object(b.a)(e,2),t=n[0],r=n[1],c=Object(l.a)(x),a=c.loading,i=c.error,j=c.data;return a?Object(p.jsx)("p",{children:"Loading..."}):i?"Error! ".concat(i.message):Object(p.jsxs)("div",{children:[Object(p.jsx)("ul",{id:"book-list",children:j.books.map((function(e){return Object(p.jsx)("li",{onClick:function(n){r(e.id)},children:e.name},e.id)}))}),Object(p.jsx)("div",{id:"book-details",children:t?Object(p.jsx)(v,{bookId:t}):Object(p.jsx)("p",{children:"No book selected..."})})]})},k=t(14),I=t(61);var y=function(){var e=Object(o.useState)({name:"",genre:"",authorId:""}),n=Object(b.a)(e,2),t=n[0],r=n[1],c=Object(l.a)(O),a=c.loading,i=c.error,j=c.data,s=Object(I.a)(m,{variables:{name:t.name,genre:t.genre,authorId:t.authorId},refetchQueries:[{query:x}]}),d=Object(b.a)(s,1)[0];return i?Object(p.jsx)("p",{children:"Error :("}):Object(p.jsxs)("form",{action:"",id:"add-book",onSubmit:function(e){e.preventDefault(),d()},children:[Object(p.jsxs)("div",{className:"field",children:[Object(p.jsx)("label",{children:"Book Name"}),Object(p.jsx)("input",{type:"text",onChange:function(e){return r(Object(k.a)(Object(k.a)({},t),{},{name:e.target.value}))}})]}),Object(p.jsxs)("div",{className:"field",children:[Object(p.jsx)("label",{children:"Genre"}),Object(p.jsx)("input",{type:"text",onChange:function(e){return r(Object(k.a)(Object(k.a)({},t),{},{genre:e.target.value}))}})]}),Object(p.jsxs)("div",{className:"field",children:[Object(p.jsx)("label",{children:"Author"}),Object(p.jsxs)("select",{name:"",id:"",onChange:function(e){return r(Object(k.a)(Object(k.a)({},t),{},{authorId:e.target.value}))},children:[Object(p.jsx)("option",{value:"",children:"Select Author"}),a?Object(p.jsx)("option",{disabled:!0,children:"Loading Authors..."}):j.authors.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),Object(p.jsx)("button",{children:"+"})]})};var S=function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("h1",{children:"Book List"}),Object(p.jsx)(f,{}),Object(p.jsx)(y,{})]})},$=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,63)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),r(e),c(e),a(e),i(e)}))},C=t(34),N=t(57),q=t(59),A=t(56),B=Object(C.a)({uri:"https://books-gql-server.vercel.app/graphql"}),L=new N.a({link:B,cache:new q.a});d.a.render(Object(p.jsx)(j.a.StrictMode,{children:Object(p.jsx)(A.a,{client:L,children:Object(p.jsx)(S,{})})}),document.getElementById("root")),$()}},[[46,1,2]]]);
//# sourceMappingURL=main.7c15223a.chunk.js.map